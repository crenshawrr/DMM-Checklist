<!doctype html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Redirecting...</title>
    <script>
      // SPA redirect for GitHub Pages:
      // redirect /some/route -> /?p=/some/route then index restores it
      const repoBase = (location.pathname.split("/")[1] || "");
      const path = location.pathname.replace(`/${repoBase}`, "");
      const search = location.search ? "&q=" + encodeURIComponent(location.search.slice(1)) : "";
      const hash = location.hash ? "&h=" + encodeURIComponent(location.hash.slice(1)) : "";
      location.replace(`/${repoBase}/?p=${encodeURIComponent(path)}${search}${hash}`);
    </script>
  </head>
  <body></body>
</html>
