import { slug } from "../utils/text";

export function buildSections() {
  const sections = [
    {
      id: "ranged-start",
      title: "Ranged start: Green dragons / Zombie pirates",
      items: [
        { text: "Spawn grand tree", points: 190 },
        { text: "Do 1 lap of gnome stronghold (lv 10 agil, jump start litheness)", points: 45 },
        { text: "Spirit tree GE", points: 25 },
        { text: "Spirit tree Gnome", points: 25 },
        { text: "Spirit tree GE" },
        { text: "Unlock/activate Litheness, Claim AND ATTUNE Ruthless ranger at bank (Equipment tab, top left)" },
        { text: "Take shortcut to fairy ring" },
        { text: "Fairy ring to BIS AIR ALS DIS", points: 100 },
        { text: "Complete stronghold 3 floors for 10k gp", points: 15 },
        { text: "Chronicle tele, enter champs guild and leave", points: 25 },
        { text: "Run to Lowe's archery shop, buy dorg crossbow and as many bone bolts as possible" },
        { text: "Run to Varrock east bank, unlock and attune Consistency" },
        { text: "Get 20 ranged on rats w/ starter bow", points: 110 },
        { text: "Claim museum lamps upstairs at Historian minas" },
        { text: "Use 1x museum lamp on ranged for 30, save the other", points: 50 },
        { text: "Run to Varr east, unlock deft strikes" },
        { text: "Run to any green dragons in wilderness" },
        { text: "Kill 3 green dragons, loot bones (~5 mins)" },
        { text: "Run to 38 wild Chaos altar with 6 bones" },
        { text: "Use bones for 37+ pray. Use lamp on pray if you didn't get 37. Use on anything if you did." },
        { text: "Run to 13 wild Chaos altar" },
        { text: "Kill zombie pirates for remaining protection" },
        {
          text:
            "If too crowded, consider leaving for: Wilderness slayer (complete varrock museum before Krystilia task)",
          indent: 1,
        },
        { text: "If too crowded, consider leaving for: Green/Blue dragons", indent: 1 },
      ],
    },
    {
      id: "magic-start",
      title: "Magic start",
      items: [
        { text: "Spawn grand tree", points: 190 },
        { text: "Do 1 lap of gnome stronghold (lv 10 agil, jump start litheness)", points: 45 },
        { text: "Spirit tree GE", points: 25 },
        { text: "Spirit tree Gnome", points: 25 },
        { text: "Spirit tree GE" },
        { text: "Unlock/activate Litheness, Claim AND ATTUNE Menacing mage (Equipment tab, top left)" },
        { text: "Fairy ring to BIS AIR ALS DIS", points: 100 },
        { text: "Chronicle tele" },
        { text: "Enter champions guild", points: 25 },
        { text: "Run to stronghold of security (hit things as you run for extra exp, early DMM points are good)" },
        { text: "Complete 3 floors for 10k gp (check first floor portal, it may work)", points: 15 },
        { text: "Chronicle tele after 10k gp" },
        { text: "Run to varrock" },
      ],
      subsections: [
        {
          id: "magic-training-locations",
          title: "Choose your training location",
          items: [
            { text: "Blue dragons: 50% Water weakness. Decent mage levels, decent loot. Loot dragon bones to sell on GE." },
            { text: "Locations (Blue): Isle of souls dungeon (BJP, run southeast), Taverly dungeon (can use shortcut w/ litheness)", indent: 1 },
            { text: "Lava dragons: 50% Water weakness. Decent mage levels. Big loot. Bury lava drag bones for pray exp. Loot alchables/sellable GE items." },
            { text: "Locations (Lava): Lava drag isle", indent: 1 },
            { text: "Fire giants: 100% Water weakness. Faster mage levels, less loot. Loot rune scim, fire bstaff, rune arrows to sell on GE." },
            { text: "Locations (Fire): Isle of souls dungeon (BJP, run southeast), Waterfall dungeon, Karuulm slayer dungeon, Giants' den, Deep wilderness dungeon", indent: 1 },
            { text: "Ice giants: 100% Fire weakness. Faster mage levels, nearly no loot, low competition. Keep addy/mith drops to sell on GE or alch." },
          ],
        },
        {
          id: "magic-steps-after-choice",
          title: "After you pick a spot",
          items: [
            { text: "Buy staff from varrock based on your next step. Air always good. Water if going blue/lava/fire giants. Fire if going Ice giants." },
            {
              text:
                "Buy 800 mind runes, 500 air OR fire OR water runes from rune shop, based on which staff you bought (If you're going to an NPC with water weakness, buy Air staff + mind/water runes, or Water staff + mind/air runes)",
            },
            { text: "Unlock consistency, deft strikes at East bank" },
            { text: "Move to your chosen training location and stay until protection runs out. Give yourself time to get to a safe zone. If you went to dragons, consider going to wildy altar for 43 prayer before protection." },
            { text: "If you finish 60 mage, complete mage arena with safespot method, alch staff for 48k gp." },
            { text: "Go to Varrock museum, claim 2 lamps and use on skills of your choosing." },
          ],
        },
      ],
    },
    {
      id: "moneymaking-start",
      title: "Moneymaking start",
      items: [
        { text: "Varrock spawn" },
        { text: "Click deadman skull, unlock Deception sigil. Attune it in your inventory." },
        { text: "If this is a moneymaking alt, run to Varrock museum and claim 2 lamps from Historian minas. Use on thieving. (Don't waste on thieving if this is your main account)" },
        { text: "Run to varlamore quetzal" },
        { text: "Run to southern central Varlamore gate" },
        { text: "Pickpocket Citizen for 10 thieving" },
        { text: "Pickpocket Farmer (southeast) for 40 thieving" },
        { text: "Pickpocket Guard at gate for 50 thieving" },
        { text: "Pickpocket Wealthy citizens for the remaining hour of protection" },
        { text: "(~190k+ gp, ~80 Thieving, +550 points)", indent: 1 },
        { text: "Bank GP before protection runs out" },
      ],
    },
    {
      id: "starting-gear",
      title: "Starting gear",
      items: [
        { text: "30 untradeable tuna in the bank, 12 untradeable tuna in the inventory" },
        { text: "A chronicle with 10 teleport cards" },
        { text: "A looting bag" },
        { text: "A Starter sword, Starter bow, and Starter staff" },
        { text: "A Deadman's Chest, Deadman's legs, and Starter Cape" },
        { text: "A dramen staff" },
      ],
    },
    {
      id: "multipliers",
      title: "Multipliers",
      items: [
        { text: "3–60: 10x Combat xp, 10x Skilling xp, 3x Drop rate" },
        { text: "61–80: 15x Combat xp, 10x Skilling xp, 3x Drop rate" },
        { text: "81–95: 15x Combat xp, 10x Skilling xp, 4x Drop rate" },
        { text: "96–126: 20x Combat xp, 10x Skilling xp, 5x Drop rate" },
      ],
    },
    {
      id: "autocompleted-quests",
      title: "Autocompleted quests",
      items: [
        { text: "Alfred Grimhand's Barcrawl (Miniquest)" },
        { text: "Animal Magnetism (***AVA'S ACCESS***)" },
        { text: "Ascent of Arceuus" },
        { text: "Barbarian Training (Miniquest)" },
        { text: "Children of the Sun (***VARLAMORE ACCESS***)" },
        { text: "Client of Kourend" },
        { text: "Demon Slayer" },
        { text: "The Depths of Despair" },
        { text: "Druidic Ritual" },
        { text: "Ernest the Chicken" },
        { text: "Fairytale I - Growing Pains" },
        { text: "Fairytale II - Cure a Queen (***FAIRY RING ACCESS***)" },
        { text: "The Forsaken Tower" },
        { text: "Goblin Diplomacy" },
        { text: "The Grand Tree (***SPIRIT TREE ACCESS***)" },
        { text: "Holy Grail" },
        { text: "Horror from the Deep" },
        { text: "Lost City" },
        { text: "Merlin's Crystal (***MUSEUM 1K EXP LAMP >LVL 20***)" },
        { text: "Monkey Madness 1 (Can't claim exp)" },
        { text: "Nature Spirit" },
        { text: "Priest in Peril" },
        { text: "The Queen of Thieves" },
        { text: "The Restless Ghost" },
        { text: "Rune Mysteries" },
        { text: "Shield of Arrav (***MUSEUM 1K EXP LAMP >LVL 20***)" },
        { text: "Tale of the Righteous" },
        { text: "Tree Gnome Village (***GLIDER ACCESS***)" },
        { text: "Vampyre Slayer" },
        { text: "Waterfall Quest" },
        { text: "Witch's House" },
        { text: "X Marks the Spot" },
      ],
    },
    {
      id: "useful-early-sigils",
      title: "Useful early sigils",
      items: [
        { text: "250 Litheness - Agil exp while running" },
        { text: "150 Deception - Auto repickpocket, no fail" },
        { text: "150 Infernal chef - 50% chance cook fish when caught" },
        { text: "100 Enhanced harvest - 3x Resources Mining, Fishing, WC, Farming" },
        { text: "100 Remote storage - Mining, Fishing, WC, Farming resources noted" },
        { text: "500 Efficiency - 50% chance increase, 2x resources Fishing, WC, Farming" },
        { text: "100 Alchemaniac - Auto recast low/high alch (need runes)" },
        { text: "150 Consistency - +1 damage every hit" },
        { text: "500 Restoration - bloodfury (10% damage dealt back)" },
        { text: "100 Deft strikes - 30% more accuracy against NPCs" },
        { text: "100 Resistance? - Monster damage reduced by 25%" },
        { text: "500 Nature - Choose contracts, farm patches grow instantly" },
      ],
    },
  ];

  // Attach stable ids to each checkbox item
  return sections.map((sec) => ({
    ...sec,
    items: sec.items.map((it, idx) => ({
      ...it,
      _id: `${sec.id}__${String(idx).padStart(3, "0")}__${slug(it.text).slice(0, 60)}`,
    })),
    subsections: (sec.subsections || []).map((sub) => ({
      ...sub,
      items: sub.items.map((it, idx) => ({
        ...it,
        _id: `${sec.id}__${sub.id}__${String(idx).padStart(3, "0")}__${slug(it.text).slice(0, 60)}`,
      })),
    })),
  }));
}
